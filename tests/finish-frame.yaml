--- # All conditions (detected and ignored) for detecting the start of a new frame

# start with pic_order_cnt_type == 0
- nal_ref_idc: 3
  nal_unit_type: 7 # Sequence parameter set
  profile_idc: 66 # Baseline
  constraint_set_flags: [0,0,0,0,0,0]
  level_idc: 1.0
  log2_max_frame_num: 4
  pic_order_cnt_type: 0
  log2_max_pic_order_cnt_lsb: 4
  max_num_ref_frames: 2
  gaps_in_frame_num_value_allowed_flag: 0
  pic_size_in_mbs: {width: 2, height: 1}
  frame_mbs_only_flag: 1
  direct_8x8_inference_flag: 0

- nal_ref_idc: 3
  nal_unit_type: 8 # Picture parameter set
  pic_parameter_set_id: 0
  entropy_coding_mode_flag: 0 # CAVLC
  bottom_field_pic_order_in_frame_present_flag: 0
  num_slice_groups: 1
  num_ref_idx_default_active: {l0: 1, l1: 1}
  weighted_pred_flag: 0 # average
  weighted_bipred_idc: 0 # average
  pic_init_qp: 0
  chroma_qp_index_offset: 0
  deblocking_filter_control_present_flag: 0
  constrained_intra_pred_flag: 0
  redundant_pic_cnt_present_flag: 0

- nal_ref_idc: 3
  nal_unit_type: 8 # Picture parameter set
  pic_parameter_set_id: 1
  entropy_coding_mode_flag: 0 # CAVLC
  bottom_field_pic_order_in_frame_present_flag: 1
  num_slice_groups: 1
  num_ref_idx_default_active: {l0: 1, l1: 1}
  weighted_pred_flag: 0 # average
  weighted_bipred_idc: 0 # average
  pic_init_qp: 0
  chroma_qp_index_offset: 0
  deblocking_filter_control_present_flag: 0
  constrained_intra_pred_flag: 0
  redundant_pic_cnt_present_flag: 0

- nal_ref_idc: 1
  nal_unit_type: 5 # Coded slice of an IDR picture
  first_mb_in_slice: 0
  slice_type: 2 # I
  pic_parameter_set_id: 0
  frame_num: {bits: 4, absolute: 0}
  idr_pic_id: 0
  pic_order_cnt: {type: 0, bits: 4, absolute: 0}
  no_output_of_prior_pics_flag: 0
  long_term_reference_flag: 0
  slice_qp_delta: 0
  macroblocks_cavlc:
  - mb_type: 0
    rem_intra4x4_pred_modes: [-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]
    intra_chroma_pred_mode: 0
    coded_block_pattern: 0

# changing pic_parameter_set_id (ignored)
- nal_ref_idc: 1
  nal_unit_type: 5 # Coded slice of an IDR picture
  first_mb_in_slice: 1
  slice_type: 2 # I
  pic_parameter_set_id: 1
  frame_num: {bits: 4, absolute: 0}
  idr_pic_id: 0
  pic_order_cnt: {type: 0, bits: 4, absolute: 0, bottom: 0}
  no_output_of_prior_pics_flag: 0
  long_term_reference_flag: 0
  slice_qp_delta: 0
  macroblocks_cavlc:
  - mb_type: 0
    rem_intra4x4_pred_modes: [-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]
    intra_chroma_pred_mode: 0
    coded_block_pattern: 0

# changing idr_pic_id
- nal_ref_idc: 1
  nal_unit_type: 5 # Coded slice of an IDR picture
  first_mb_in_slice: 0
  slice_type: 2 # I
  pic_parameter_set_id: 1
  frame_num: {bits: 4, absolute: 0}
  idr_pic_id: 1
  pic_order_cnt: {type: 0, bits: 4, absolute: 0, bottom: 0}
  no_output_of_prior_pics_flag: 0
  long_term_reference_flag: 0
  slice_qp_delta: 0
  macroblocks_cavlc:
  - mb_type: 0
    rem_intra4x4_pred_modes: [-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]
    intra_chroma_pred_mode: 0
    coded_block_pattern: 0

# changing delta_pic_order_cnt_bottom (ignored)
- nal_ref_idc: 1
  nal_unit_type: 5 # Coded slice of an IDR picture
  first_mb_in_slice: 1
  slice_type: 2 # I
  pic_parameter_set_id: 1
  frame_num: {bits: 4, absolute: 0}
  idr_pic_id: 1
  pic_order_cnt: {type: 0, bits: 4, absolute: 0, bottom: 1}
  no_output_of_prior_pics_flag: 0
  long_term_reference_flag: 0
  slice_qp_delta: 0
  macroblocks_cavlc:
  - mb_type: 0
    rem_intra4x4_pred_modes: [-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]
    intra_chroma_pred_mode: 0
    coded_block_pattern: 0

# changing nal_unit_type
- nal_ref_idc: 1
  nal_unit_type: 1
  first_mb_in_slice: 0
  slice_type: 2 # I
  pic_parameter_set_id: 0
  frame_num: {bits: 4, absolute: 0}
  pic_order_cnt: {type: 0, bits: 4, absolute: 0}
  slice_qp_delta: 0
  macroblocks_cavlc:
  - mb_type: 0
    rem_intra4x4_pred_modes: [-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]
    intra_chroma_pred_mode: 0
    coded_block_pattern: 0
  - mb_type: 0
    rem_intra4x4_pred_modes: [-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]
    intra_chroma_pred_mode: 0
    coded_block_pattern: 0

# changing frame_num
- nal_ref_idc: 1
  nal_unit_type: 1
  first_mb_in_slice: 0
  slice_type: 2 # I
  pic_parameter_set_id: 0
  frame_num: {bits: 4, absolute: 1}
  pic_order_cnt: {type: 0, bits: 4, absolute: 0}
  slice_qp_delta: 0
  macroblocks_cavlc:
  - mb_type: 0
    rem_intra4x4_pred_modes: [-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]
    intra_chroma_pred_mode: 0
    coded_block_pattern: 0
  - mb_type: 0
    rem_intra4x4_pred_modes: [-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]
    intra_chroma_pred_mode: 0
    coded_block_pattern: 0

# unsetting nal_ref_idc
- nal_ref_idc: 0
  nal_unit_type: 1
  first_mb_in_slice: 0
  slice_type: 2 # I
  pic_parameter_set_id: 0
  frame_num: {bits: 4, absolute: 1}
  pic_order_cnt: {type: 0, bits: 4, absolute: 0}
  slice_qp_delta: 0
  macroblocks_cavlc:
  - mb_type: 0
    rem_intra4x4_pred_modes: [-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]
    intra_chroma_pred_mode: 0
    coded_block_pattern: 0
  - mb_type: 0
    rem_intra4x4_pred_modes: [-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]
    intra_chroma_pred_mode: 0
    coded_block_pattern: 0

# changing pic_order_cnt_lsb on a non-ref
- nal_ref_idc: 0
  nal_unit_type: 1
  first_mb_in_slice: 0
  slice_type: 2 # I
  pic_parameter_set_id: 0
  frame_num: {bits: 4, absolute: 1}
  pic_order_cnt: {type: 0, bits: 4, absolute: 1}
  slice_qp_delta: 0
  macroblocks_cavlc:
  - mb_type: 0
    rem_intra4x4_pred_modes: [-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]
    intra_chroma_pred_mode: 0
    coded_block_pattern: 0
  - mb_type: 0
    rem_intra4x4_pred_modes: [-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]
    intra_chroma_pred_mode: 0
    coded_block_pattern: 0

# setting nal_ref_idc
- nal_ref_idc: 1
  nal_unit_type: 1
  first_mb_in_slice: 0
  slice_type: 2 # I
  pic_parameter_set_id: 0
  frame_num: {bits: 4, absolute: 1}
  pic_order_cnt: {type: 0, bits: 4, absolute: 1}
  slice_qp_delta: 0
  macroblocks_cavlc:
  - mb_type: 0
    rem_intra4x4_pred_modes: [-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]
    intra_chroma_pred_mode: 0
    coded_block_pattern: 0
  - mb_type: 0
    rem_intra4x4_pred_modes: [-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]
    intra_chroma_pred_mode: 0
    coded_block_pattern: 0

# changing pic_order_cnt_lsb on a ref
- nal_ref_idc: 1
  nal_unit_type: 1
  first_mb_in_slice: 0
  slice_type: 2 # I
  pic_parameter_set_id: 0
  frame_num: {bits: 4, absolute: 1}
  pic_order_cnt: {type: 0, bits: 4, absolute: 2}
  slice_qp_delta: 0
  macroblocks_cavlc:
  - mb_type: 0
    rem_intra4x4_pred_modes: [-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]
    intra_chroma_pred_mode: 0
    coded_block_pattern: 0
  - mb_type: 0
    rem_intra4x4_pred_modes: [-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]
    intra_chroma_pred_mode: 0
    coded_block_pattern: 0

# switch to pic_order_cnt_type == 1
- nal_ref_idc: 3
  nal_unit_type: 7 # Sequence parameter set
  profile_idc: 66 # Baseline
  constraint_set_flags: [0,0,0,0,0,0]
  level_idc: 1.0
  log2_max_frame_num: 4
  pic_order_cnt_type: 1
  delta_pic_order_always_zero_flag: 0
  offset_for_non_ref_pic: 0
  offset_for_top_to_bottom_field: 0
  offsets_for_ref_frames: []
  log2_max_pic_order_cnt_lsb: 4
  max_num_ref_frames: 2
  gaps_in_frame_num_value_allowed_flag: 0
  pic_size_in_mbs: {width: 2, height: 1}
  frame_mbs_only_flag: 1
  direct_8x8_inference_flag: 0

- nal_ref_idc: 1
  nal_unit_type: 1 # Coded slice of a non-IDR picture
  first_mb_in_slice: 0
  slice_type: 2 # I
  pic_parameter_set_id: 1
  frame_num: {bits: 4, absolute: 2}
  pic_order_cnt: {type: 1, delta0: 3, delta1: 0, absolute: 3}
  slice_qp_delta: 0
  macroblocks_cavlc:
  - mb_type: 0
    rem_intra4x4_pred_modes: [-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]
    intra_chroma_pred_mode: 0
    coded_block_pattern: 0

# changing delta_pic_order_cnt[1] (ignored)
- nal_ref_idc: 1
  nal_unit_type: 1 # Coded slice of a non-IDR picture
  first_mb_in_slice: 1
  slice_type: 2 # I
  pic_parameter_set_id: 1
  frame_num: {bits: 4, absolute: 2}
  pic_order_cnt: {type: 1, delta0: 3, delta1: 1, absolute: 3, bottom: 4}
  slice_qp_delta: 0
  macroblocks_cavlc:
  - mb_type: 0
    rem_intra4x4_pred_modes: [-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]
    intra_chroma_pred_mode: 0
    coded_block_pattern: 0

# changing delta_pic_order_cnt[0] on a ref
- nal_ref_idc: 1
  nal_unit_type: 1 # Coded slice of a non-IDR picture
  first_mb_in_slice: 0
  slice_type: 2 # I
  pic_parameter_set_id: 1
  frame_num: {bits: 4, absolute: 2}
  pic_order_cnt: {type: 1, delta0: 5, delta1: 1, absolute: 5, bottom: 6}
  slice_qp_delta: 0
  macroblocks_cavlc:
  - mb_type: 0
    rem_intra4x4_pred_modes: [-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]
    intra_chroma_pred_mode: 0
    coded_block_pattern: 0
  - mb_type: 0
    rem_intra4x4_pred_modes: [-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]
    intra_chroma_pred_mode: 0
    coded_block_pattern: 0

- nal_ref_idc: 0
  nal_unit_type: 1
  first_mb_in_slice: 0
  slice_type: 2 # I
  pic_parameter_set_id: 0
  frame_num: {bits: 4, absolute: 3}
  pic_order_cnt: {type: 1, delta0: 7, absolute: 7}
  slice_qp_delta: 0
  macroblocks_cavlc:
  - mb_type: 0
    rem_intra4x4_pred_modes: [-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]
    intra_chroma_pred_mode: 0
    coded_block_pattern: 0
  - mb_type: 0
    rem_intra4x4_pred_modes: [-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]
    intra_chroma_pred_mode: 0
    coded_block_pattern: 0

# changing delta_pic_order_cnt[0] on a non-ref
- nal_ref_idc: 0
  nal_unit_type: 1
  first_mb_in_slice: 0
  slice_type: 2 # I
  pic_parameter_set_id: 0
  frame_num: {bits: 4, absolute: 3}
  pic_order_cnt: {type: 1, delta0: 8, absolute: 8}
  slice_qp_delta: 0
  macroblocks_cavlc:
  - mb_type: 0
    rem_intra4x4_pred_modes: [-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]
    intra_chroma_pred_mode: 0
    coded_block_pattern: 0
  - mb_type: 0
    rem_intra4x4_pred_modes: [-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]
    intra_chroma_pred_mode: 0
    coded_block_pattern: 0
